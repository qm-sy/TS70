C51 COMPILER V9.60.7.0   NTC                                                               11/21/2025 17:16:31 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE NTC
OBJECT MODULE PLACED IN ..\Output\ntc.obj
COMPILER INVOKED BY: D:\APP\KEIL\MDK\C51\BIN\C51.EXE ..\BSP\Src\ntc.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\BSP\Inc;.
                    -.\Core\Inc;..\Driver;..\Emembed\Inc;..\SYSTEM\Inc) DEBUG OBJECTEXTEND PRINT(.\Listings\ntc.lst) TABS(2) OBJECT(..\Output
                    -\ntc.obj)

line level    source

   1          #include "ntc.h"
   2          
   3          #define NTCTabNum 181
   4          
   5          TEMP temp;
   6          
   7          void Temp_Init( void )
   8          {
   9   1          temp.scan_flag = 0;
  10   1      }
  11          
  12          uint16_t* max6675_readRawVal( void )
  13          {
  14   1        uint16_t adc_val[3] = {0};
  15   1          uint16_t i;
  16   1      
  17   1          TH_CS = 0;
  18   1      
  19   1          for(i = 0; i < 15; i++)
  20   1          {
  21   2              TH_SCK = 1;
  22   2              delay_us(10);
  23   2              /* TherMo1  */
  24   2              if(TherMo1)
  25   2              {
  26   3                  adc_val[0] |= 0x0001;
  27   3              }
  28   2              else 
  29   2              {
  30   3                  adc_val[0] |= 0;
  31   3              }
  32   2              adc_val[0] <<= 1;
  33   2      
  34   2              /* TherMo2  */
  35   2              if(TherMo2)
  36   2              {
  37   3                  adc_val[1] |= 0x0001;
  38   3              }
  39   2              else 
  40   2              {
  41   3                  adc_val[1] |= 0;
  42   3              }
  43   2              adc_val[1] <<= 1;
  44   2      
  45   2              /* TherMo3  */
  46   2              if(TherMo3)
  47   2              {
  48   3                  adc_val[2] |= 0x0001;
  49   3              }
  50   2              else 
  51   2              {
  52   3                  adc_val[2] |= 0;
  53   3              }
C51 COMPILER V9.60.7.0   NTC                                                               11/21/2025 17:16:31 PAGE 2   

  54   2              adc_val[2] <<= 1;
  55   2      
  56   2              TH_SCK = 0;
  57   2              delay_us(10);
  58   2          }
  59   1      
  60   1          TH_CS = 1;
  61   1      
  62   1          if ( adc_val[0] & 0X04 )
  63   1          {
  64   2              adc_val[0] = 4096; //未检测到热电偶
  65   2          }
  66   1          else
  67   1          {
  68   2              adc_val[0] >>= 3;//去掉D0、1、2位
  69   2          }
  70   1      
  71   1          if ( adc_val[1] & 0X04 )
  72   1          {
  73   2              adc_val[1] = 4096; //未检测到热电偶
  74   2          }
  75   1          else
  76   1          {
  77   2              adc_val[1] >>= 3;//去掉D0、1、2位
  78   2          }
  79   1      
  80   1          if ( adc_val[2] & 0X04 )
  81   1          {
  82   2              adc_val[2] = 4096; //未检测到热电偶
  83   2          }
  84   1          else
  85   1          {
  86   2              adc_val[2] >>= 3;//去掉D0、1、2位
  87   2          }
  88   1          return adc_val;
  89   1      }
  90           
  91          uint16_t* max6675_readTemp( void )
  92          {
  93   1        uint16_t temp_val[3] = {0};
  94   1        uint16_t *adc_val = NULL;
  95   1      
  96   1        adc_val = max6675_readRawVal();
  97   1        delay_ms(1); 
  98   1      
  99   1        temp_val[0] = (uint16_t)(adc_val[0] * (1023.75 / 4095));
 100   1        temp_val[1] = (uint16_t)(adc_val[1] * (1023.75 / 4095));
 101   1          temp_val[2] = (uint16_t)(adc_val[2] * (1023.75 / 4095));
 102   1      
 103   1          return temp_val;
 104   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    500    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =      7      17
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.60.7.0   NTC                                                               11/21/2025 17:16:31 PAGE 3   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

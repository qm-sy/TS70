C51 COMPILER V9.60.7.0   DHT11                                                             10/21/2025 16:12:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE DHT11
OBJECT MODULE PLACED IN ..\Output\dht11.obj
COMPILER INVOKED BY: D:\APP\KEIL\MDK\C51\BIN\C51.EXE ..\BSP\Src\dht11.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\BSP\Inc
                    -;..\Core\Inc;..\Driver;..\Emembed\Inc;..\SYSTEM\Inc) DEBUG OBJECTEXTEND PRINT(.\Listings\dht11.lst) TABS(2) OBJECT(..\Ou
                    -tput\dht11.obj)

line level    source

   1          #include  "dht11.h" 
   2          
   3          DHT11 dht11;
   4          
   5          void DHT11_start()
   6          {
   7   1          Temp_Hum = 1;
   8   1          delay_us(2);
   9   1      
  10   1          Temp_Hum = 0;
  11   1          delay_ms(25);   //Êãâ‰ΩéÂª∂Êó∂18ms‰ª•‰∏ä
  12   1      
  13   1          Temp_Hum = 1;
  14   1          delay_us(30);   //ÊãâÈ´ò Âª∂Êó∂ 20~40usÔºåÂèñ‰∏≠Èó¥ÂÄº 30us
  15   1      }
  16          
  17           /**************************************************************************************
  18           * Êèè  Ëø∞ : ‰ªéDHT11ËØªÂèñ‰∏Ä‰∏™Â≠óËäÇÔºåMSBÂÖàË°å
  19           * ÂÖ•  ÂèÇ : Êó†
  20           * ËøîÂõûÂÄº : uint8_t
  21           **************************************************************************************/
  22          static uint8_t Read_Byte(void)  
  23          {       
  24   1        uint8_t i, dat = 0;
  25   1      
  26   1        for( i = 0; i < 8; i++ )    
  27   1        {    
  28   2          while(!Temp_Hum); //ÊØèbit‰ª•50us‰ΩéÁîµÂπ≥Ê†áÁΩÆÂºÄÂßãÔºåËΩÆËØ¢Áõ¥Âà∞‰ªéÊú∫ÂèëÂá∫ ÁöÑ50us ‰ΩéÁîµÂπ≥ ÁªìÊ
             -ùü
  29   2      
  30   2          delay_us(40); //Âª∂Êó∂Á∫¶40us,Ëøô‰∏™Âª∂Êó∂ÈúÄË¶ÅÂ§ß‰∫éÊï∞ÊçÆ0ÊåÅÁª≠ÁöÑÊó∂Èó¥Âç≥ÂèØ        
  31   2      
  32   2              if(Temp_Hum)   //Á∫¶40usÂêé‰ªç‰∏∫È´òÁîµÂπ≥Ë°®Á§∫Êï∞ÊçÆ‚Äú1‚Äù
  33   2          {
  34   3            while(Temp_Hum);  //Á≠âÂæÖÊï∞ÊçÆ1ÁöÑÈ´òÁîµÂπ≥ÁªìÊùü
  35   3            dat|=(uint8_t)(0x01<<(7-i));  //ÊääÁ¨¨7-i‰ΩçÁΩÆ1ÔºåMSBÂÖàË°å 
  36   3          }
  37   2          else   //40usÂêé‰∏∫‰ΩéÁîµÂπ≥Ë°®Á§∫Êï∞ÊçÆ‚Äú0‚Äù
  38   2          {        
  39   3            dat&=(uint8_t)~(0x01<<(7-i)); //ÊääÁ¨¨7-i‰ΩçÁΩÆ0ÔºåMSBÂÖàË°å
  40   3          }
  41   2        }
  42   1        return dat; 
  43   1      }
  44          
  45           /**************************************************************************************
  46           * Êèè  Ëø∞ : ‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑÊï∞ÊçÆ‰º†Ëæì‰∏∫40bitÔºåÈ´ò‰ΩçÂÖàÂá∫
  47           * ÂÖ•  ÂèÇ : 8bit ÊπøÂ∫¶Êï¥Êï∞ + 8bit ÊπøÂ∫¶Â∞èÊï∞ + 8bit Ê∏©Â∫¶Êï¥Êï∞ + 8bit Ê∏©Â∫¶Â∞èÊï∞ + 8bit Ê†°È™åÂ
             -íå 
  48           * ËøîÂõûÂÄº : Êó†
  49           **************************************************************************************/
  50          void Read_DHT11(void)   //Ê∏©Êπø‰º†ÊÑüÂêØÂä®
  51          {
C51 COMPILER V9.60.7.0   DHT11                                                             10/21/2025 16:12:29 PAGE 2   

  52   1          uint8_t R_H,R_L,T_H,T_L,revise; 
  53   1      
  54   1          DHT11_start();
  55   1        
  56   1          if(!Temp_Hum)      //Âà§Êñ≠‰ªéÊú∫ÊòØÂê¶Êúâ‰ΩéÁîµÂπ≥ÂìçÂ∫î‰ø°Âè∑ Â¶Ç‰∏çÂìçÂ∫îÂàôË∑≥Âá∫ÔºåÂìçÂ∫îÂàôÂêë‰∏
             -ãËøêË°å   
  57   1          {
  58   2              while(!Temp_Hum);   //ËΩÆËØ¢Áõ¥Âà∞‰ªéÊú∫ÂèëÂá∫ÁöÑ83us ‰ΩéÁîµÂπ≥ ÂìçÂ∫î‰ø°Âè∑ÁªìÊùü
  59   2              while(Temp_Hum);    //ËΩÆËØ¢Áõ¥Âà∞‰ªéÊú∫ÂèëÂá∫ÁöÑ87us È´òÁîµÂπ≥ Ê†áÁΩÆ‰ø°Âè∑ÁªìÊùü
  60   2            
  61   2              /*ÂºÄÂßãÊé•Êî∂Êï∞ÊçÆ*/ 
  62   2              R_H= Read_Byte();
  63   2              R_L= Read_Byte();
  64   2              T_H= Read_Byte();
  65   2              T_L= Read_Byte();
  66   2      
  67   2              revise = Read_Byte();
  68   2      
  69   2              Temp_Hum =1 ;                   //ËØªÂèñÁªìÊùüÔºå‰∏ªÊú∫ÊãâÈ´ò
  70   2      
  71   2              if((R_H+R_L+T_H+T_L)==revise)      //ÊúÄÂêé‰∏ÄÂ≠óËäÇ‰∏∫Ê†°È™å‰ΩçÔºåÊ†°È™åÊòØÂê¶Ê≠£Á°Æ
  72   2              {
  73   3                  slave_04.envir_temp  = T_H;
  74   3                  slave_04.envir_humidity = R_H;
  75   3              }
  76   2          }
  77   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    229    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      2       6
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
